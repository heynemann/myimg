<!DOCTYPE HTML>
<html>
    <head>
        <meta charset=UTF-8" />
        <title>Test Runner</title>
        <script src="../assets/mootools/core-1.3.2.js"></script>
        <script src="../front/public/js/promise.js"></script>
        <script src="../front/public/js/scrollend.js"></script>
        <script src="../front/public/js/datasource.js"></script>
        <style type="text/css">
            ul{
                width: 400px;
                list-style: none;
            }
            li{
                width: 100px;
                height: 100px;
                outline: black 1px solid;
                float: left;
                overflow: hidden;
            }
            .hidden{
                display: none;
            }
        </style>
    </head>
    <body>
        <ul id="source">
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
            <li>iPhone OS</li>
            <li>Android</li>
            <li>Windows Mobile</li>
        </ul>
        <script>
            var dataSources = new DataSource();
            new ScrollPublisher(null, {
                offset: 400,
                onEnd: function(){
                    dataSources.update('list');
                }
            });

            dataSources.register('list', function(response){
                response([1,2,3,4,5,6]);
            });

            dataSources.addEvent('list', function(data){
                $('source').adopt(data.map(function(item){
                    return new Element('li', {html: item});
                }));
            });

        </script>
    </body>
</html>

